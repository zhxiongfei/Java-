# IO流

## 概念

- **I/O流**全称是 Input/Output Steam, 译为 "输入/输出流"
  - 应用程序**写数据**到磁盘上,称为输出流
  - 应用程序**读数据**到内存中, 称为输入流



### File

- 一个File对象就代表一个文件或者目录 （文件夹）

- 提供了常用的的API，可实现对文件创建/删除/剪切/读取等操作.

  

### 字符集(Character Set)

- 字符集(Charset) : 由字符组成的集合
- 在计算机里
  - 一个中文汉字是一个字符
  - 一个英文字母是一个字符
  - 一个阿拉伯数字也是一个字符
  - 一个标点符号是一个符号
  - ...
- 常见的字符集有 : 
  - ASCII : 128个字符(包含了英文字符大小写，阿拉伯数字等)
  - ISO-8859-1 : 支持欧洲的部分语言文字，在有些环境下也叫 Latin-1
  - GB2312 : 支持中文(包含6763个汉字)
  - BIG5 : 支持繁体中文(包含130053个汉字)
  - GBK : 是对GB2312，BIG5的扩充 (包含了21003个汉字), 支持中日韩
  - GB18030 : 是对GBK的扩充(包含了27484个汉字)
  - Unicode :  包括了世界上所有的字符
- ISO-8859-1, GB2312, BIG5, GBK, GB18030, Unicode 中都包含了ASCII 中的所有字符



### 字符编码

- 每个字符集都有对应的字符编码，它决定了每个字符如何转成二进制存储在计算机中
- ASCII : 单字节编码，编码范围 0x00 - 0x7F
- ISO-8859-1 : 单字节编码，编码范围 0x00 - 0xFF
  - 0x00 - 0x7F 和 ASCII一致, 0x80 - 0x9F 是控制字符，0xA0 - 0xFF是文本字符
- GB2312 ，BIG5， GBK ：采用双字节表示一个汉字
- GB18030 ： 采用单字节，双字节，四字节表示一个字符
- Unicode : 有Unicode，UTF-8，UTF-16，UTF-32 等编码，最常用的是 UTF-8
  - UTF-8采用单字节，双字节，三字节，四字节表示一个字符

#### 乱码

- 一般将 **字符串** 转为**二进制**的过程称为，**编码(Encode)**
- 一般将 二进制 转为字符串的过程称为，**解码(Decode)**
- 编码，解码时使用的字符编码必须保持一致，否则会造成乱码



### 字节流

- 字节流的特点
  - 一次只读写一个字节
  - 最终都继承 InputSteam, OutputSteam
- 最常用的字节流 : FileInputSteam, FileOutputSteam



### 字符流

- 字符流的特点
  - 一次只读写一个字符
  - 最终都继承 Reader,Writer
- 常用的字符流有 FileReader,FileWriter
  - 这2个类只适合文本文件，比如.txt .java文件



### 缓冲流

- 字节流，字符流，都是无缓冲的 I/O流，每个读写操作由底层系统直接处理
  - 每个读写操作通常会出发磁盘访问，因此大量的读写操作，可能会使程序的效率大大降低
- 为了减少读写操作带来的开销，Java实现了缓冲的I/O流
  - 缓冲输入流 : 从缓冲区读取数据，并且只有当缓冲区为空时才会调用本地的输入API(Native Input API)
  - 缓冲输出流 ：将数据写入缓冲区，并且只有当缓冲区已满时才调用本地的输出API(Native Output API)

#### 使用

- 缓冲流的常见使用方式 : 将无缓冲流传递给缓冲流的构造方法 (将无缓冲流包装成缓冲流)
  - 如果把无缓冲流比作是一个无装备的士兵，那么缓冲流就是一个有着强力装备的士兵
  - **装饰器模式**



#### close, flush

- 只需要执行缓冲流的close方法，不需要执行缓冲流内部包装的无缓冲流的close 方法
- 调用缓冲流的flush方法，会强制调用本地的输出api，将缓冲区的数据真正写入到文件中
  - 缓冲输出流的close 方法内部会调用一次**flush**方法



### 数据流

- 有2个数据流 : DataInputSteam, DataOutputSteam, 支持基本类型，字符串类型的I/O操作
- 

